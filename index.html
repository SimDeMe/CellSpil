<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="UTF-8">
    <title>Celle Evolution Sim</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://pixijs.download/release/pixi.js"></script>
    <link rel="icon" href="data:,">
</head>

<body>
    <div id="ui-layer">
        <button id="pauseBtn">‚è∏ PAUSE</button>
        <button id="resetBtn">üîÑ RESET</button>
        <button id="inspectBtn">üîç INSPECT</button>
        <button id="observeBtn" style="border-color: #AB47BC; color: #AB47BC;">üëÅ OBSERVE</button>
        <button id="apoBtn" style="border-color: #ff5252; color: #ff5252;">‚ò† APOPTOSE</button>
        <button id="debugBtn" class="hidden">üêõ DEBUG</button>
        <div id="debugTimer" class="hidden">00:00</div>
    </div>

    <!-- Status Overlay -->
    <div id="statusOverlay" class="hidden">PAUSE</div>

    <!-- Mutation Popup (Moved out of ui-layer to allow proper centering) -->
    <div id="mutationPopup" class="hidden">
        <h2 id="mutTitle">Mutation!</h2>
        <p id="mutDesc">Beskrivelse</p>
        <p id="mutCost" class="cost">Cost</p>
    </div>

    <!-- Inspector Sidebar (Always Active) -->
    <!-- Inspector Modal (Replaces Sidebar) -->
    <div id="inspectorModal" class="inspector-modal hidden">
        <div class="modal-header">
            <h2>INSPECT</h2>
            <button id="closeInspectBtn" class="close-btn">X</button>
        </div>

        <div class="modal-tabs">
            <button class="modal-tab-btn active" data-tab="tabMutations">üß¨ Mutationer</button>
            <button class="modal-tab-btn" data-tab="tabMetabolism">‚ö° Metabolisme</button>
            <button class="modal-tab-btn" data-tab="tabKatabolisme">üìâ Katabolisme</button>
            <button class="modal-tab-btn" data-tab="tabAnabolisme">üìà Anabolisme</button>
            <button class="modal-tab-btn" data-tab="tabCells">ü¶† Celler</button>
        </div>

        <div class="modal-body">
            <!-- TAB 1: MUTATIONER -->
            <div id="tabMutations" class="modal-tab-content active">
                <div id="mutationTreeContainer"></div>
            </div>

            <!-- TAB 2: METABOLISME -->
            <div id="tabMetabolism" class="modal-tab-content">
                <div id="metabolismContainer">
                    <!-- Indhold dynamisk genereret -->
                </div>
            </div>

            <!-- TAB 3: KATABOLISME -->
            <div id="tabKatabolisme" class="modal-tab-content">
                <div id="katabolismeContainer"></div>
            </div>

            <!-- TAB 4: ANABOLISME -->
            <div id="tabAnabolisme" class="modal-tab-content">
                <div id="anabolismeContainer"></div>
            </div>

            <!-- TAB 5: CELLER -->
            <div id="tabCells" class="modal-tab-content">
                <div id="cellListContainer">
                    <!-- Liste af celler genereres her -->
                </div>
            </div>
        </div>
    </div>

    <!-- Persistent HUD (Right Panel) -->
    <div id="gameHUD">
        <canvas id="minimapCanvas" width="200" height="200"></canvas>
        <div class="hud-content">
            <div class="stat-group">
                <label>Generation:</label> <span id="hudGen">0</span>
            </div>
            <div class="stat-group">
                <label>ATP:</label>
                <div class="bar-container">
                    <div id="hudAtpBar" class="bar"></div>
                </div>
                <span id="hudAtpVal">0/0</span>
            </div>
            <div class="stat-group">
                <label>Aminosyrer:</label>
                <div class="bar-container">
                    <div id="hudAminoBar" class="bar amino"></div>
                </div>
                <span id="hudAminoVal">0/0</span>
            </div>
            <div class="stat-group">
                <label>Nucleotider:</label>
                <div class="bar-container">
                    <div id="hudNucleoBar" class="bar nucleo"></div>
                </div>
                <span id="hudNucleoVal">0/0</span>
            </div>
            <div class="stat-group">
                <label>Population:</label> <span id="hudPop">0</span>
            </div>

            <hr style="border: 0; border-top: 1px solid #333; margin: 10px 0;">

            <div class="stat-group">
                <label>Glucose:</label>
                <div class="bar-container">
                    <div id="hudGlucoseBar" class="bar" style="background: #FFEB3B;"></div>
                </div>
                <span id="hudGlucoseVal">0/0</span>
            </div>
            <div class="stat-group">
                <label>Carbon (C):</label>
                <div class="bar-container">
                    <div id="hudCarbonBar" class="bar" style="background: #FFF;"></div>
                </div>
                <span id="hudCarbonVal">0/0</span>
            </div>
            <div class="stat-group">
                <label>Nitrogen (N):</label>
                <div class="bar-container">
                    <div id="hudNitrogenBar" class="bar" style="background: #2196F3;"></div>
                </div>
                <span id="hudNitrogenVal">0/0</span>
            </div>
            <div class="stat-group">
                <label>Phosphate (P):</label>
                <div class="bar-container">
                    <div id="hudPhosphateBar" class="bar" style="background: #F44336;"></div>
                </div>
                <span id="hudPhosphateVal">0/0</span>
            </div>
        </div>
    </div>

    </div>

    <!-- PixiJS Container -->
    <div id="game-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;"></div>

    <!-- DEBUG UI -->
    <!-- DEBUG UI -->

    <div id="debugMenu" class="modal hidden">
        <div class="modal-content debug-content">
            <div class="modal-header">
                <h2>Debug Menu</h2>
                <button id="closeDebugBtn" class="close-btn">&times;</button>
            </div>

            <div class="debug-section">
                <h3>Spawn Entity</h3>
                <div class="debug-controls">
                    <button onclick="window.debugSpawn('glucose')">Glucose</button>
                    <button onclick="window.debugSpawn('amino')">Amino Acid</button>
                    <button onclick="window.debugSpawn('nucleotide')">Nucleotide</button>
                    <br>
                    <button onclick="window.debugSpawn('bacillus')">Bacillus</button>
                    <button onclick="window.debugSpawn('megabacillus')">Megabacillus</button>
                </div>
            </div>

            <div class="debug-section">
                <h3>Player Mutations</h3>
                <div class="debug-toggles" id="debugMutationList">
                    <!-- Checkboxes generated by JS -->
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="main.js"></script>
</body>

</html>